<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proforma Invoice</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.4;
            color: #333;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .invoice-container {
            max-width: 900px;
            margin: 0 auto;
            background: #ffffff;
            border: 3px solid #b8dde8;
        }

        .invoice-header {
            padding: 30px 40px;
            border-bottom: 3px solid #b8dde8;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .company-section { flex: 1; }

        .company-logo {
            max-width: 150px;
            height: 150px;
            margin-bottom: 15px;
        }

        .header-left { font-size: 13px; line-height: 1.8; color: #333; }
        .header-left .label { display: inline-block; width: 150px; }

        .invoice-title-section { text-align: right; }
        .invoice-type { color: #00bcd4; font-size: 13px; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; }
        .invoice-number { font-size: 28px; font-weight: bold; color: #333; }

        .customer-info-section {
            padding: 20px 40px;
            background-color: #ffffff;
            border-bottom: 3px solid #b8dde8;
            display: flex;
            justify-content: space-between;
        }

        .info-row { display: flex; margin-bottom: 8px; font-size: 13px; }
        .info-label { min-width: 150px; color: #666; }
        .info-value { font-weight: bold; color: #333; }

        .items-section { padding: 0; }

        .items-table { width: 100%; border-collapse: collapse; }
        .items-table thead { background-color: #d4eef5; }
        .items-table th {
            padding: 12px 15px; text-align: left; font-size: 12px; font-weight: bold; color: #333;
            text-transform: uppercase; border-bottom: 2px solid #b8dde8;
        }
        .items-table th:nth-child(2), .items-table th:nth-child(3), .items-table th:nth-child(4) { text-align: center; }

        .items-table tbody tr { border-bottom: 1px solid #e0e0e0; }
        .items-table tbody tr:last-child { border-bottom: none; }

        .items-table td { padding: 15px; font-size: 12px; color: #333; vertical-align: top; }
        .items-table td:nth-child(2), .items-table td:nth-child(3), .items-table td:nth-child(4) { text-align: center; }

        .product-name { font-weight: bold; margin-bottom: 4px; font-size: 13px; }
        .product-detail { font-size: 11px; color: #666; line-height: 1.5; margin-bottom: 2px; }

        .totals-section { background-color: #d4eef5; padding: 20px 40px; }
        .totals-table { width: 100%; max-width: 400px; margin-left: auto; }
        .totals-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 14px; }
        .totals-row.total {
            background-color: #00bcd4; color: #ffffff; font-weight: bold; font-size: 16px;
            padding: 12px 15px; margin-top: 5px;
        }

        .payment-section {
            padding: 30px 40px;
            background-color: #ffffff;
            border-bottom: 3px solid #b8dde8;
        }

        .payment-section h3 {
            color: #00bcd4;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .payment-intro { font-size: 13px; color: #333; margin-bottom: 20px; line-height: 1.6; }
        .bank-details { display: flex; gap: 30px; margin-bottom: 25px; flex-wrap: wrap; }

        .bank-item { flex: 1; min-width: 200px; }
        .bank-item h4 { font-size: 13px; font-weight: bold; color: #333; margin-bottom: 8px; }
        .bank-item p { font-size: 12px; color: #666; line-height: 1.6; }

        .terms-section { margin-top: 20px; }
        .terms-section p { font-size: 12px; color: #666; line-height: 1.6; }

        .footer-section {
            padding: 25px 40px;
            background-color: #d4eef5;
            border-top: 3px solid #b8dde8;
            text-align: center;
            font-size: 11px;
            color: #333;
            line-height: 1.6;
        }

        .footer-section strong { font-weight: bold; }

        .page-number { text-align: center; padding: 15px; font-size: 12px; color: #666; }

        @media print {
            body { padding: 0; background-color: #ffffff; }
            .invoice-container { border: none; }
        }

        @media (max-width: 768px) {
            .invoice-header, .customer-info-section { flex-direction: column; }
            .invoice-title-section { text-align: left; margin-top: 20px; }
            .items-table { font-size: 11px; }
            .items-table th, .items-table td { padding: 10px 8px; }
        }
        
        
    </style>
</head>
<button id="downloadBtn" style="margin: 20px; padding: 10px 20px; background: #00bcd4; color: #fff; border: none; border-radius: 5px; cursor: pointer;">
  Download PDF
</button>

<body>
    <div class="invoice-container">
        <div class="invoice-header">
            <div class="company-section">
                <img src="https://aurionsa.wordpress.com/wp-content/uploads/2025/04/whatsapp_image_2025-04-08_at_15.40.02-removebg-preview-1-1.png" alt="Company Logo" class="company-logo">
                <div class="header-left">
                    <div><span class="label">Date</span> {{invoice_date}}</div>
                    <div><span class="label">Project Reference</span> {{project_reference}}</div>
                </div>
            </div>
            <div class="invoice-title-section">
                <div class="invoice-type">Proforma Invoice</div>
                <div class="invoice-number">{{invoice_number}}</div>
            </div>
        </div>

        <div class="customer-info-section">
            <div class="customer-info-left">
                <div class="info-row">
                    <span class="info-label">Customer Name</span>
                    <span class="info-value">{{customer_name}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Email</span>
                    <span class="info-value">{{customer_email}}</span>
                </div>
            </div>
            <div class="customer-info-right">
                <div class="info-row">
                    <span class="info-label">Phone</span>
                    <span class="info-value">{{customer_phone}}</span>
                </div>
            </div>
        </div>

        <div class="items-section">
            <table class="items-table">
                <thead>
                    <tr>
                        <th>SERVICE DESCRIPTION</th>
                        <th>QTY</th>
                        <th>UNIT PRICE</th>
                        <th>AMOUNT</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="product-name">{{service_name_1}}</div>
                            <div class="product-detail">{{service_description_1}}</div>
                        </td>
                        <td>{{quantity_1}}</td>
                        <td>{{unit_price_1}}</td>
                        <td>{{amount_1}}</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="product-name">{{service_name_2}}</div>
                            <div class="product-detail">{{service_description_2}}</div>
                        </td>
                        <td>{{quantity_2}}</td>
                        <td>{{unit_price_2}}</td>
                        <td>{{amount_2}}</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="product-name">{{service_name_3}}</div>
                            <div class="product-detail">{{service_description_3}}</div>
                        </td>
                        <td>{{quantity_3}}</td>
                        <td>{{unit_price_3}}</td>
                        <td>{{amount_3}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="totals-section">
            <div class="totals-table">

                <div class="totals-row total">
                    <span>TOTAL</span>
                    <span>{{total}}</span>
                </div>
            </div>
        </div>

        <div class="page-number">1 of 1</div>

        <div class="payment-section">
            <h3>EFT/BANK PAYMENTS</h3>
            <p class="payment-intro">Please pay <strong>{{total}}</strong> using reference <strong>{{invoice_number}}</strong></p>

            <div class="bank-details">
                <div class="bank-item">
                    <h4>ABSA</h4>
                    <p>Acc Name: Thato Kgopa<br>Acc No: 9298 697 256<br>Branch: 632005</p>
                </div>
            </div>

            <div class="terms-section">
              <h3>Reference</h3>
              <p>Please use the reference {{invoice_number}} when making deposits or payments.<br>
Please verify your payment terms with your Account Manager.</p><br>
                <h3>TERMS & CONDITIONS</h3>
                <p>
                  All work remains property of Aurion until full payment is received.<br>
Expected turnaround time is 3-4 weeks<br>
Aurion is deemed the webmaster of the built website and the set fee will be payable monthly.<br>
No refunds on completed services.<br>
By making payment, the client agrees to these terms.
                </p>
            </div>
        </div>

        <div class="footer-section">
            <strong>Tel:</strong> 067 286 2136 | <strong>Web:</strong> aurioncreative.com<br>
            <strong>Email:</strong> info@aurioncreative.com<br>
            <strong>Address</strong> 286 Hillcrest Pretoria Gauteng<br>
        </div>
    </div>
    
<!-- jsPDF and html2canvas libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
document.getElementById("downloadBtn").addEventListener("click", async function() {
  const { jsPDF } = window.jspdf;

  // Select the invoice container
  const invoice = document.querySelector(".invoice-container");

  // Create canvas snapshot of the invoice
  const canvas = await html2canvas(invoice, { scale: 2 });
  const imgData = canvas.toDataURL("image/png");

  // Create PDF in portrait A4 size
  const pdf = new jsPDF("p", "mm", "a4");
  const pageWidth = pdf.internal.pageSize.getWidth();
  const pageHeight = pdf.internal.pageSize.getHeight();

  // Convert canvas dimensions to fit A4
  const imgWidth = pageWidth;
  const imgHeight = (canvas.height * imgWidth) / canvas.width;

  let position = 0;

  // Handle long invoices (multiple pages)
  if (imgHeight > pageHeight) {
    let heightLeft = imgHeight;

    while (heightLeft > 0) {
      pdf.addImage(imgData, "PNG", 0, position, imgWidth, imgHeight);
      heightLeft -= pageHeight;
      if (heightLeft > 0) pdf.addPage();
      position -= pageHeight;
    }
  } else {
    pdf.addImage(imgData, "PNG", 0, 0, imgWidth, imgHeight);
  }

  // Save PDF with invoice number (if available)
  const invoiceNumber = invoice.querySelector(".invoice-number")?.textContent.trim() || "invoice";
  pdf.save(`${invoiceNumber}.pdf`);
});
</script>

    
    
</body>
</html>
